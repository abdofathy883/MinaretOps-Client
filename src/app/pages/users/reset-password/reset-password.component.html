<div class="reset-password-container">
  <div class="reset-password-card">
    <!-- Header -->
    <div class="header">
      <div class="logo-container">
        <img src="/assets/The Minaret Agency Logo.png" alt="Minaret Agency Logo" class="logo">
      </div>
      <h1 class="title">إعادة تعيين كلمة المرور</h1>
      <p class="subtitle">أدخل كلمة المرور الجديدة</p>
    </div>

    <!-- Alert Messages -->
  @if (alertMessage) {
  <div class="alert" [class]="'alert-' + alertType">
    {{ alertMessage }}
    <!-- <button class="alert-close" (click)="closeAlert()">×</button> -->
  </div>
  }

    <!-- Reset Password Form -->
    <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()" class="reset-form">
      
      <!-- New Password Field -->
      <div class="form-group">
        <label for="newPassword" class="form-label">كلمة المرور الجديدة</label>
        <div class="input-container">
          <input 
            type="password" 
            id="newPassword"
            formControlName="newPassword" 
            class="form-input"
            [class.error]="hasError('newPassword', 'required') || hasError('newPassword', 'minlength')"
            placeholder="أدخل كلمة المرور الجديدة"
            autocomplete="new-password">
          <div class="input-icon">
            <i class="fas fa-lock"></i>
          </div>
        </div>
        <div *ngIf="hasError('newPassword', 'required')" class="error-message">
          {{ getErrorMessage('newPassword') }}
        </div>
        <div *ngIf="hasError('newPassword', 'minlength')" class="error-message">
          {{ getErrorMessage('newPassword') }}
        </div>
      </div>

      <div class="password-requirements">
        <h4>متطلبات كلمة المرور:</h4>
        <ul>
          <li>يجب أن تكون 6 أحرف على الأقل</li>
          <li>يجب أن تتطابق كلمة المرور مع التأكيد</li>
        </ul>
      </div>

      <button 
        type="submit" 
        class="submit-btn"
        [disabled]="resetPasswordForm.invalid || isLoading"
        [class.loading]="isLoading">
        <span *ngIf="!isLoading">
          <i class="fas fa-key"></i>
          إعادة تعيين كلمة المرور
        </span>
        <span *ngIf="isLoading" class="loading-content">
          <i class="fas fa-spinner fa-spin"></i>
          جاري المعالجة...
        </span>
      </button>

      <!-- Back to Login Link -->
      <div class="back-to-login">
        <a routerLink="/login" class="login-link">
          <i class="fas fa-arrow-right"></i>
          العودة إلى تسجيل الدخول
        </a>
      </div>
    </form>
  </div>
</div>
