<section class="container py-4">
    <h2>سجل الحضور</h2>
    <div>
      <h4>تصفية حسب:</h4>
      <form [formGroup]="filterForm">
        <div class="row">
          <div class="col">
            <label for="" class="form-label">اليوم</label>
            <input type="date" class="form-control" formControlName="date">
          </div>
          <div class="col">
            <label for="" class="form-label">الموظف</label>
            <select name="" id="" class="form-select" formControlName="employeeId">
              <option disabled selected>اختر موظف</option>
              @for (emp of employees; track $index) {
                <option [value]="emp.id">{{ emp.firstName + ' ' + emp.lastName }}</option>
              }
            </select>
          </div>
          <!-- <div class="col">
            <button class="add-btn w-100" (click)="applyFilters()">تصفية</button>
          </div> -->
        </div>
      </form>
    </div>
    <table class="content-table">
      <thead>
        <tr>
          <th>الموظف</th>
          <th>اليوم</th>
          <th>وقت الحضور</th>
          <th>وقت الانصراف</th>
          <th>الحالة</th>
          <th>إجمالي وقت العمل</th>
          <th>إجمالي وقت الاستراحة</th>
          <th>عدد فترات الاستراحة</th>
        </tr>
      </thead>
      <tbody>
        @for (record of filteredAttendanceRecords; track $index) {
        <tr>
          <td data-cell="الموظف">{{ record.employeeName }}</td>
          <td data-cell="اليوم">{{ record.clockIn | date : "shortDate" }}</td>
          <td data-cell="وقت الحضور">{{ record.clockIn | date : "shortTime" }}</td>
          <td data-cell="وقت الانصراف">{{ record.clockOut | date : "shortTime" }}</td>
          <td data-cell="الحالة">
            <span class="status-badge status-present">{{ mapAttendanceStatus(record.status) }}</span>
          </td>
          <td data-cell="اجمالي وقت العمل">{{ shortTimeSpan(record.totalWorkingTime)}}</td>
          <td data-cell="اجمالي وقت الاستراحة">{{ shortTimeSpan(record.totalBreakTime) }}</td>
          @if (record.breakPeriods) {
            <td data-cell="عدد فترات الاستراحة">{{ record.breakPeriods.length }}</td>
          }@else {
            <td data-cell="عدد فترات الاستراحة">0</td>
          }
          
        </tr>
        } @if (attendanceRecords.length === 0) {
        <tr>
          <td colspan="5" class="no-records">لا توجد سجلات حضور</td>
        </tr>
        }
      </tbody>
    </table>
    <div class="records-table">
    </div>

</section>